<form
  (ngSubmit)="submittingForm4(nameAddressFormGroup); nameFirst.focus();"
  [formGroup]="nameAddressFormGroup"
>
  <!-- {{updateValidState()}} -->
  <div>
    <b>Preview for model data</b>: {{name.oneLine}} lives at {{address.oneLine}}
    <br />
    <b>Preview for form data</b>:
    {{showGroupDataInOneLine(nameAddressFormGroup)}}<br />
  </div>

  <h3>4 Bound data with formGroup</h3>
  <button class="tiny button" (click)="showForm(nameAddressFormGroup, $event);">
    Show form
  </button>
  <fieldset class="fieldset">
    <legend>
      Name and address form
      <span
        class="label secondary"
        [class.hide]="!nameAddressFormGroup.pristine"
        >Unchanged</span
      >
      <span class="label warning" [class.hide]="nameAddressFormGroup.pristine"
        >In progress</span
      >
      <span class="label success" [class.hide]="!nameAddressFormGroup.valid"
        >Ready to submit</span
      >
    </legend>

    <div name="name" class="row">
      <div class="large-6 columns">
        <label for="first"
          >First Name:
          <span class="label alert" [class.hide]="whenValidStateFor.nameFirst"
            >{{errorMessages.nameFirst }}</span
          >
          <span>{{nameFirst.className}}</span>
        </label>
        <input
          id="first"
          type="text"
          formControlName="nameFirst"
          #nameFirst
          required
        />
      </div>
      <div class="large-6 columns">
        <label for="last"
          >Last Name:
          <span class="label alert" [class.hide]="whenValidStateFor.nameLast"
            >{{errorMessages.nameLast }}</span
          >
          <!-- <span>{{nameLast.className}}</span> -->
        </label>
        <input id="last" type="text" formControlName="nameLast" #nameLast />
      </div>
    </div>

    <div>
      <div name="street" class="row">
        <div class="large-8 columns">
          <label for="street"
            >Street:
            <span
              class="label alert"
              [class.hide]="whenValidStateFor.addressStreet"
              >{{errorMessages.addressStreet }}</span
            >
          </label>
          <input
            id="street"
            type="text"
            formControlName="addressStreet"
            #addressStreet
          />
        </div>
      </div>

      <div name="city-state-zip" class="row">
        <div class="large-4 columns">
          <label for="city"
            >City:
            <span
              class="label alert"
              [class.hide]="whenValidStateFor.addressCity"
              >{{errorMessages.addressCity }}</span
            >
          </label>
          <input
            id="city"
            type="text"
            formControlName="addressCity" grumpy-city
            #addressCity
          />
        </div>
        <div class="large-2 columns">
          <span
            class="label alert"
            [class.hide]="whenValidStateFor.addressState"
            >{{errorMessages.addressState }}</span
          >
          <select id='state' formControlName='addressState'>
            <option *ngFor="let state of states" [value]="state.abbreviation"> {{state.name}}</option>
        </select>
        
        </div>
        <div class="large-2 columns">
          <label for="zip"
            >Zip:
            <span
              class="label alert"
              [class.hide]="whenValidStateFor.addressZip"
              >{{errorMessages.addressZip }}</span
            >
          </label>
          <input
            id="zip"
            type="text"
            formControlName="addressZip"
            #addressZip
          />
        </div>
      </div>
    </div>
  </fieldset>
  <button type="submit" class="button" [disabled]="!nameAddressFormGroup.valid">
    {{nameAddressFormGroup.valid ? 'Send data' : 'Fix problems before sending'}}
  </button>
</form>
